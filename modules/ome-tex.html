<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Oh My Emacs TeX</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="Oh My Emacs TeX"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-12-30T17:03+0800"/>
<meta name="author" content=""/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">Oh My Emacs TeX</h1>

<p>This is part of the <a href="https://github.com/xiaohanyu/oh-my-emacs">oh-my-emacs</a>.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#tex-prerequisites">Prerequisites</a></li>
<li><a href="#tex-el-get-packages">El-get packages</a></li>
<li><a href="#auctex">AUCTeX</a>
<ul>
<li><a href="#sec-3-1">Prerequisites and Installation</a></li>
<li><a href="#sec-3-2">Keybindings</a></li>
<li><a href="#sec-3-3">Checking</a></li>
<li><a href="#sec-3-4">Reftex</a></li>
<li><a href="#sec-3-5">Coordinations with other packages</a></li>
<li><a href="#sec-3-6">Oh-my-emacs settings</a></li>
<li><a href="#sec-3-7">Tips and Tricks</a></li>
<li><a href="#sec-3-8">Todo</a></li>
</ul>
</li>
<li><a href="#cdlatex">CDLaTeX</a></li>
<li><a href="#sec-5">Todo</a>
<ul>
<li><a href="#sec-5-1">AUCTeX</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-tex-prerequisites" class="outline-2">
<h2 id="tex-prerequisites"><a name="sec-1" id="sec-1"></a>Prerequisites</h2>
<div class="outline-text-2" id="text-tex-prerequisites">


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption>Prerequisites for ome-tex module</caption>
<colgroup><col class="left" /><col class="left" /><col class="left" /><col class="left" /><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left"></th><th scope="col" class="left">Windows</th><th scope="col" class="left">Ubuntu/Debian/Mint</th><th scope="col" class="left">ArchLinux</th><th scope="col" class="left">Fedora</th><th scope="col" class="left">Mac OS X</th><th scope="col" class="left">Mandatory?</th></tr>
</thead>
<tbody>
<tr><td class="left"><a href="http://www.tug.org/texlive/">texlive</a></td><td class="left"></td><td class="left">texlive-full latex-beamer</td><td class="left">texlive-most texlive-cjk</td><td class="left">texlive-all</td><td class="left"><a href="http://tug.org/mactex/">MacTeX</a></td><td class="left">Yes</td></tr>
<tr><td class="left"><a href="http://pygments.org/">pygments</a></td><td class="left"></td><td class="left">[pip]</td><td class="left">[pip]</td><td class="left">[pip]</td><td class="left">[pip]</td><td class="left">No</td></tr>
</tbody>
</table>


<p>
Note:
</p><ul>
<li><a href="http://www.tug.org/texlive/">texlive</a>, the full texlive distribution is really huge, so install necessary
  parts as you need.
</li>
<li><a href="http://en.wikipedia.org/wiki/MacTeX">MacTeX</a> is a redistribution of texlive, which includes Mac-specific utilities
  and front-ends. It is also pre-configured to work out-of-the-box with Mac OS
  X as it provides sensible defaults for configuration options that, in TeX
  Live, are left up to the user to allow for its cross-platform compatibility.
</li>
</ul>


</div>

</div>

<div id="outline-container-tex-el-get-packages" class="outline-2">
<h2 id="tex-el-get-packages"><a name="sec-2" id="sec-2"></a>El-get packages</h2>
<div class="outline-text-2" id="text-tex-el-get-packages">


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption>El-get packages for ome-tex module</caption>
<colgroup><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left"></th><th scope="col" class="left">Status</th><th scope="col" class="left">Description</th></tr>
</thead>
<tbody>
<tr><td class="left"><a href="http://www.gnu.org/software/auctex/">AUCTeX</a></td><td class="left">Required</td><td class="left">You need it, believe me.</td></tr>
<tr><td class="left"><a href="http://staff.science.uva.nl/~dominik/Tools/cdlatex/">CDLaTeX</a></td><td class="left">Optional</td><td class="left">Speedy \LaTeX{} typing.</td></tr>
</tbody>
</table>


</div>

</div>

<div id="outline-container-auctex" class="outline-2">
<h2 id="auctex"><a name="sec-3" id="sec-3"></a>AUCTeX</h2>
<div class="outline-text-2" id="text-auctex">


<p>
<a href="http://www.gnu.org/software/auctex/">AUCTeX</a> is the predominant \TeX{}/\LaTeX{} writing environment for
Emacs/XEmacs.
</p>

</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1">Prerequisites and Installation</h3>
<div class="outline-text-3" id="text-3-1">

<p>\TeX{} is a long history legend in computer typesetting. To configure a
working \TeX{} environment is far beyond the scope of this project. However,
I can give you some hint to install a \TeX{} system on Linux. If you are
</p><ul>
<li>a Ubuntu/Debian/Mint user, install texlive by <code>sudo apt-get install   texlive-full</code>
</li>
<li>a Arch Linux user, install texlive by <code>sudo pacman -S texlive-most   texlive-langcjk</code>
</li>
<li>a Fedora user, install texlive by <code>sudo yum -S texlive-all</code>
</li>
<li>a SuSE user, install texlive by <code>sudo zypper in texlive-xetex</code>
</li>
</ul>


<p>
For Mac OS X users, <a href="http://tug.org/mactex/">MacTeX</a> is the best choice. You can install it directly from
its website or via <a href="https://github.com/phinze/homebrew-cask">homebrew-cask</a>. By default, MacTeX install all binary
executables to <code>/usr/texbin/</code>, which is different from Linux.
</p>
<p>
If you are not lucky enough, you should follow the official <a href="http://www.tug.org/texlive/">texlive</a>
instructions to install it.
</p>
<p>
There're other annoying problems if you're a <a href="http://en.wikipedia.org/wiki/CJK_characters">CJK</a> user, such as fonts and
package configuration in \TeX{} documents, but this is further beyond the scope
of this project. So refer to necessary <a href="https://tug.org/">TUG</a>s, or BBS for help. For Chinese user,
<a href="http://www.ctex.org/">CTEX</a> is a good place to start your journey. <a href="http://zzg34b.w3.c361.com/">LaTeX编辑部</a> also provides lots of
useful resources written in Chinese.
</p>
<p>
For all \TeX{} users, the Comprehensive TEX Archive Network (<a href="http://www.ctan.org/">CTAN</a>) is your
lifelong friend, which act as the central place for all kinds of material
around \TeX{}. The famous Stack Exchange Network also provides a
<a href="http://tex.stackexchange.com/">http://tex.stackexchange.com/</a> which focus on \TeX{} related questions.
</p>
<p>
Enough, enjoy your journey to \TeX{} world! Now it's time to come back to
AUCTeX. Besides a working \TeX{} installation, you also need <code>autoconf</code> and
<code>texinfo</code> package for <code>el-get-install auctex</code>, and a recent <a href="http://www.ghostscript.com/">Ghostscript</a> for
<code>preview-latex</code> in both <a href="http://en.wikipedia.org/wiki/Device_independent_file_format">DVI</a> and <a href="http://en.wikipedia.org/wiki/Pdf">PDF</a> mode.
</p>
<p>
Finally, if you're tired or afraid to setup a working \TeX{} environment,
<a href="https://www.writelatex.com/">writelatex</a> provides a really instance starting point with no pain, just try it
before you fall in love with \TeX{} world.
</p>
</div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2">Keybindings</h3>
<div class="outline-text-3" id="text-3-2">

<p>AUCTeX is really flexible and customizable, it also provides a rich set of
menubar entries. Here's a list of most commonly used keybindings in AUCTeX:
</p><ul>
<li>Editing
<ul>
<li><code>C-c C-s</code> <code>LaTeX-section</code>
</li>
<li><code>C-c C-e</code> <code>LaTeX-environment</code>
</li>
<li><code>C-c C-m</code> <code>TeX-insert-macro</code>
</li>
<li><code>C-c ]</code> <code>LaTeX-close-environment</code>
</li>
</ul>

</li>
<li>Marking and Commenting
<ul>
<li><code>C-c *</code> <code>LaTeX-mark-section</code>
</li>
<li><code>C-c .</code> <code>LaTeX-mark-environment</code>
</li>
<li><code>C-c ;</code> <code>TeX-comment-or-uncomment-region</code>
</li>
<li><code>C-c %</code> <code>TeX-comment-or-uncomment-paragraph</code>
</li>
</ul>

</li>
<li>Folding:
<ul>
<li><code>C-c C-o C-b</code> <code>TeX-fold-buffer</code>
</li>
<li><code>C-c C-o b</code> <code>TeX-fold-clearout-buffer</code>
</li>
</ul>

</li>
<li>Command Controlling
<ul>
<li><code>C-c C-c</code> <code>TeX-command-master</code>
</li>
<li><code>C-c C-r</code> <code>TeX-command-region</code>
</li>
<li><code>C-c C-b</code> <code>TeX-command-buffer</code>
</li>
<li><code>C-c C-k</code> <code>TeX-kill-job</code>
</li>
<li><code>C-c C-l</code> <code>TeX-recenter-output-buffer</code>
</li>
<li><code>C-c ^</code> <code>TeX-home-buffer</code>
</li>
</ul>

</li>
</ul>


</div>

</div>

<div id="outline-container-3-3" class="outline-3">
<h3 id="sec-3-3">Checking</h3>
<div class="outline-text-3" id="text-3-3">

<p><a href="http://www.ctan.org/tex-archive/support/lacheck/">lacheck</a> and <a href="http://baruch.ev-en.org/proj/chktex/">chktex</a> is the lint tool for \TeX{}, you can install them in Ubuntu
by <code>sudo apt-get install lacheck chktex</code>. AUCTeX has direct support for
<code>lacheck</code> and <code>chktex</code>. You can start <code>lacheck</code> with <code>C-c C-c Check &lt;RET&gt;</code> and
<code>chktex</code> with <code>C-c C-c ChkTeX &lt;RET&gt;</code>.
</p>
<p>
Each of the two utilities will find some errors the other doesn't, but <code>chktex</code>
is more configurable, allowing you to create your own errors
</p>
</div>

</div>

<div id="outline-container-3-4" class="outline-3">
<h3 id="sec-3-4">Reftex</h3>
<div class="outline-text-3" id="text-3-4">

<ul>
<li><code>C-c =</code> <code>reftex-toc</code> will show a table of contents of the document.
</li>
<li><code>C-c (</code> <code>reftex-label</code> to insert a label at point.
</li>
<li><code>C-c [</code> <code>reftex-citation</code> to insert a citations from BibTeX database.
</li>
</ul>


</div>

</div>

<div id="outline-container-3-5" class="outline-3">
<h3 id="sec-3-5">Coordinations with other packages</h3>
<div class="outline-text-3" id="text-3-5">

<p>Oh-my-emacs adopts some other awesome packages such as <code>smartparens</code> and
<code>evil</code>, which has some conflicts with AUCTeX. so there need some hack, which,
is always the main topic with Emacs.
</p>
<p>
<code>smartparens-latex</code> provide some goodies for \TeX{} editing. But we need to
ensure <code>smartparens</code> is available before we <code>require 'smartparens-latex</code>.
</p>
<p>
<code>smartparens</code> still has some weird problems for inserting "$" in \TeX{}, which
is a weird problem. In fact, both AUCTeX and <code>smartparens</code> provides some pair
management functions, which may be overlapping. AUCTeX provide a
<code>TeX-electric-math</code>, while <code>smartparens</code> was born for pair management. Worse,
the following <code>cdlatex.el</code> also provides some pair management functions. Ah, we
need some coordination between them. So any ideas or patches will be
appreciated.
</p>
<p>
Another oh-my-emacs package, <code>evil</code>, shadowed some keybindings for AUCTeX's
<code>reftex-toc-mode</code>. However, I only enable <code>evil-mode</code> in <code>text-mode-hook</code> and
<code>prog-mode-hook</code>, and <code>reftex-toc-mode</code> is derived from <code>fundamental-mode</code>, I
have no idea why <code>evil-local-mode</code> is enabled by default when entering
<code>reftex-toc-mode</code>, so I have to <code>turn-off-evil-mode</code> explicitly.
</p>
</div>

</div>

<div id="outline-container-3-6" class="outline-3">
<h3 id="sec-3-6">Oh-my-emacs settings</h3>
<div class="outline-text-3" id="text-3-6">

<ul>
<li>Use <code>xetex</code> as the default <code>TeX-engine</code> for better support for \TeX{} font
  selection and PDF export.
</li>
<li>Enable <code>outline-minor-mode</code> and <code>flyspell-mode</code>.
</li>
<li>Enable <code>TeX-interactive-mode</code>, <code>TeX-PDF-mode</code>, <code>TeX-fold-mode</code> and
  <code>reftex-mode</code>.
</li>
<li>Favors <a href="http://okular.kde.org/">Okular</a> and <a href="https://projects.gnome.org/evince/">Evince</a> as the default viewer in Linux, and fallbacks to
  <code>xdg-open</code> if both Okular and Evince is unavailable. Since I don't have a
  Windows or Mac OS X environment, patches are always welcome.
</li>
</ul>





<pre class="example">(defun ome-auctex-setup ()
  (when (require 'smartparens nil 'noerror)
    (require 'smartparens-latex))
  (setq TeX-auto-save t)                ; Automatically save style information
                                        ; when saving the buffer
  (setq TeX-parse-self t)               ; Parse file after loading it if no
                                        ; style hook is found for it.
  (setq LaTeX-syntactic-comment t)
  (setq TeX-auto-untabify t)            ; remove all tabs before saving
  (setq reftex-plug-into-AUCTeX t)
  (setq-default TeX-engine 'xetex)      ; use xelatex by default

  ;; Mac OS X fallback to the "open" program as the default viewer for all
  ;; types of files.
  (cond
   ;; settings for Linux
   ((eq system-type 'gnu/linux)
    (cond
     ((executable-find "okular")
      (setq TeX-view-program-selection
            '((output-pdf "Okular")
              (output-dvi "Okular"))))
     ((executable-find "evince")
      (setq TeX-view-program-selection
            '((output-pdf "Evince")
              (output-dvi "Evince"))))
     (t
      (setq TeX-view-program-selection
            '((output-pdf "xdg-open")
              (output-dvi "xdg-open")))))))

  (add-hook 'TeX-mode-hook
            (lambda ()
              (outline-minor-mode t)
              (flyspell-mode t)
              (TeX-interactive-mode t)
              (TeX-PDF-mode t)
              (TeX-fold-mode t)))

  (add-hook 'LaTeX-mode-hook
            (lambda ()
              (LaTeX-math-mode t)
              (reftex-mode t)))

  (add-hook 'reftex-toc-mode-hook
            (lambda ()
              (when (featurep 'evil)
                (turn-off-evil-mode)))))

(when (executable-find
       (if (eq system-type 'darwin)
           ;; MacTeX install all its executables to /usr/texbin directory
           "/usr/texbin/pdflatex"
         "pdflatex"))
  (ome-install 'auctex))
</pre>


</div>

</div>

<div id="outline-container-3-7" class="outline-3">
<h3 id="sec-3-7">Tips and Tricks</h3>
<div class="outline-text-3" id="text-3-7">

<p><a href="http://tex.stackexchange.com/questions/52179/what-is-your-favorite-emacs-and-or-auctex-command-trick">Here</a>'s some tips and tricks about AUCTeX.
</p>

</div>

<div id="outline-container-3-7-1" class="outline-4">
<h4 id="sec-3-7-1">LaTeX shell escape</h4>
<div class="outline-text-4" id="text-3-7-1">


<p>
\LaTeX{} supports an lesser known "shell-escape" feature. In a word, this mode
can be used to incorporate dynamic content, or run external process during the
compilation phase. Check this <a href="http://scrolls.mafgani.net/2011/03/latex-shell-escape/">post</a> for details.
</p>
<p>
Unfortunately, there no easy explicit way to customize command line options for
various AUCTeX backend. So we need some tricks to get around this. Thanks
<a href="http://stackoverflow.com/questions/3300497/using-minted-source-code-latex-package-with-emacs-auctex/">stackoverflow</a> again, here's the code snippet for AUCTeX \LaTeX{} backend.
</p>



<pre class="example">(defvar ome-LaTeX-shell-escape-mode nil
  "Whether or not LaTeX shell escape mode is enabled.")

(defun ome-LaTeX-toggle-shell-escape ()
  (interactive)
  (if ome-LaTeX-shell-escape-mode
      (progn
        (setcdr (assoc "LaTeX" TeX-command-list)
                '("%`%l%(mode)%' %t"
                  TeX-run-TeX nil (latex-mode doctex-mode) :help "Run LaTeX"))
        (setq ome-LaTeX-shell-escape-mode nil)
        (message "LaTeX shell escape mode turned off."))
    (progn
      (setcdr (assoc "LaTeX" TeX-command-list)
              '("%`%l%(mode) -shell-escape%' %t"
                TeX-run-TeX nil (latex-mode doctex-mode) :help "Run LaTeX")))
    (setq ome-LaTeX-shell-escape-mode t)
    (message "LaTeX shell escape mode turned on.")))

;; (define-key org-mode-map (kbd "C-c C-x x") 'ome-LaTeX-toggle-shell-escape)
</pre>


</div>
</div>

</div>

<div id="outline-container-3-8" class="outline-3">
<h3 id="sec-3-8">Todo</h3>
<div class="outline-text-3" id="text-3-8">

<ul>
<li>Add <code>auto-complete</code> support,
  <a href="https://github.com/monsanto/auto-complete-auctex">https://github.com/monsanto/auto-complete-auctex</a>.
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-cdlatex" class="outline-2">
<h2 id="cdlatex"><a name="sec-4" id="sec-4"></a>CDLaTeX</h2>
<div class="outline-text-2" id="text-cdlatex">


<blockquote>

<p>CDLaTeX - more LaTeX functionality for Emacs and XEmacs
</p>
<p>
CDLaTeX is a minor mode which re-implements many features also found in the
AUCTeX LaTeX mode. The reason for this is mainly historical - much of it was
written before I knew about AUCTeX. So check this out if you would like to try
a different implementation.  Here are some of the differences: Environment
insertion is template based, and not hook based. Keyword commands (which are
executed by typing a short (2-4 letters) keyword into the buffer, followed by
TAB) give very rapid access to the main environment templates and mathematical
constructs. CDLaTeX knows the difference between text mode and math mode in
LaTeX and adapts automatically to that. You can download CDLaTeX here.
</p>
<p>
&ndash; <a href="http://staff.science.uva.nl/~dominik/Tools/cdlatex/">http://staff.science.uva.nl/~dominik/Tools/cdlatex/</a>
</p>
</blockquote>


<p>
The comments in <code>cdlatex.el</code> said that "CDLaTeX requires texmathp.el which is
distributed with AUCTeX. Starting with Emacs 21.3, texmathp.el will be part of
Emacs.", however, I didn't find any <code>texmathp.el</code> with current emacs
distribution. So CDLaTeX requires AUCTeX as a dependency, which means it didn't
work with Emacs builtin <code>tex-mode</code> anymore.
</p>



<pre class="example">(defun ome-cdlatex-mode-setup ()
  (add-hook 'LaTeX-mode-hook 'turn-on-cdlatex)
  (add-hook 'latex-mode-hook 'turn-on-cdlatex))

(when (el-get-package-is-installed 'auctex)
  (ome-install 'cdlatex-mode))

</pre>


</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">Todo</h2>
<div class="outline-text-2" id="text-5">



</div>

<div id="outline-container-5-1" class="outline-3">
<h3 id="sec-5-1">AUCTeX</h3>
<div class="outline-text-3" id="text-5-1">

<ul>
<li>Add auto-complete support for auctex. see
  <a href="https://github.com/monsanto/auto-complete-auctex">https://github.com/monsanto/auto-complete-auctex</a>.
</li>
<li>Investigate on "What is TeX master file?"
</li>
<li>What is SyncTeX? How to use it?
</li>
<li>What is <code>TeX-interactive-mode</code>?
</li>
</ul>

</div>
</div>
</div>
</div>

</body>
</html>
